# 词法陷阱

1. 术语
   * 符号(token): 指的是程序的一个基本组成单元，其作用相当于一个句子中的单词。
   * 符号就是程序中的一个基本信息单元，而组成符号的字符序列不同
   * 但是同一组字符序列在某个上下文环境中属于一个符号，在另一个上下文中属于完全不同的另一个符号。
   * 编译器中负责将程序分解为一个一个符号的部分，称之为词法分析器。

## `=不同于==`

1. 例如： 如果错误书写

   ```c
   while (c = ' ' || c == '\t' || c == '\n')
       c = getc(f);
   ```

2. 如果确实需要，需要显示比较

   ```c
   if ((x = y) != 0) 
       foo();
   ```

## `& |  不同于 && ||`

* 按位与运算符: `&`, 按位或运算符 `|`
* 逻辑运算符: `&& , ||`

## 词法分析中的 贪心法

* C语言中某些符号只有一个字符长度(单字符符号)，也有多个字符符号例如(==, 标识符等)
* C语言的解决方案伟，每一个符号应该包含尽可能多的字符。
* 注意： 除了字符串和字符常量，符号中间不能嵌有空白
  * `a---b`  和 `a -- - b`含义相同
  * `a - -- b`: 含义不同

* 如果`/`是为了判断下一个符号读入的，而且`/`之后还有`*`, 那么无论上下文如何，两个字符都会当作一个符号`/*`, 表示注释开始。
  * `y = x / *p`
* 在老版本的编译器下，可能导致更多问题
  * `=-` 和可能被当作 `-=`

## 字符与字符串

* C语言中的单引号和双引号含义不同，某些情况如果混用编译器可能不会报错，但会产生难以意料的后果
* 用单引号引起了的一个字符实际代表一个整数, 注意区分
* 整型数一般为(16或32位)的存储空间可以容纳读个字符，所以有的C编译器允许在一个字符常量包含多个字符。